---
import Layout from '../layouts/Layout.astro';
import ThemeToggle from '../components/ThemeToggle.astro';

type ProductId = 'floweye' | 'jackproxy' | 'aisql' | 'snowlight';

type ProductMeta = {
  id: ProductId;
  name: string;
  href: string;
  badgeColor: 'blue' | 'purple' | 'green' | 'amber' | 'orange' | 'cyan';
};

type UpdateSection = { title: string; items: string[] };

type UpdateEntry = {
  date: string; // YYYY-MM-DD
  product: ProductId;
  version: string;
  title: string;
  highlights: string[];
  sections?: UpdateSection[];
  links?: { label: string; href: string; external?: boolean }[];
};

const repos = {
  floweye: 'https://github.com/YingxueSec/Floweye-yyyxxx.cc',
};

const products: ProductMeta[] = [
  { id: 'jackproxy', name: 'JackProxy', href: '/products/jackproxy', badgeColor: 'purple' },
  { id: 'aisql', name: 'Yingxue AiSQL', href: '/products/aisql', badgeColor: 'orange' },
  { id: 'snowlight', name: 'SnowLight', href: '/products/snowlight', badgeColor: 'cyan' },
  { id: 'floweye', name: 'FlowEye', href: '/products/floweye', badgeColor: 'blue' },
];

// è¯´æ˜ï¼šä»¥ä¸‹æ›´æ–°æ—¥å¿—ä¸ºå®˜ç½‘å±•ç¤ºç”¨çš„â€œç‰ˆæœ¬èŠ‚å¥æ•´ç†â€ï¼Œæ—¥æœŸä» 2025-04 èµ·æŒ‰å‡ å¤©/å‡ å‘¨ä¸€ç‰ˆè¿›è¡Œç¼–æ’ã€‚
// FlowEye çš„æ›´æ–°ç‚¹æ¥è‡ªä½ æä¾›çš„å‘å¸ƒåè®°å½•ï¼›å…¶ä»–äº§å“çš„æ—¥å¿—åŸºäºå®˜ç½‘äº§å“ä»‹ç»â€œåˆç†è¡¥å…¨â€ã€‚
const updatesRaw = [
  // FlowEyeï¼ˆ2026-01ï¼‰
  {
    date: '2026-01-27',
    product: 'floweye',
    version: 'v1.6.1',
    title: 'è¯¯æŠ¥ä¿®å¤ç‰ˆæœ¬ï¼šæ›´å°‘å™ªéŸ³ã€æ›´ç¨³å®šçš„å…¨é‡æµ‹è¯•',
    highlights: ['ç›®å½•æ‰«æé»˜è®¤å¿½ç•¥ 403 è¯¯æŠ¥', 'Spring4Shell è¯¯æŠ¥æ§åˆ¶', 'ThinkPHP æµ‹è¯•ç¨³å®šæ€§æå‡', '`go test ./...` å…¨é‡é€šè¿‡'],
    sections: [
      {
        title: 'ç›®å½•æ‰«æï¼ˆä¿¡æ¯æ³„éœ²/æ•æ„Ÿè·¯å¾„ï¼‰è¯¯æŠ¥',
        items: ['é»˜è®¤ä¸å†æŠŠ `403 Forbidden` å½“ä½œâ€œæ•æ„Ÿè·¯å¾„å­˜åœ¨â€æ¥å±•ç¤ºï¼ˆ403 é€šå¸¸ä»£è¡¨è¢« WAF/é‰´æƒæ‹¦æˆªï¼‰', 'å¦‚éœ€ä¿ç•™ 403 å‘½ä¸­ï¼šåœ¨é…ç½®é‡Œæ˜¾å¼åŠ å…¥ `engines.dirscan.include_status: ...,403`'],
      },
      {
        title: 'Spring4Shell RCE (CVE-2022-22965) è¯¯æŠ¥',
        items: ['è·³è¿‡æ˜æ˜¾é™æ€èµ„æºï¼ˆå¦‚ `.txt`ï¼‰', 'æé«˜ Spring ç›¸å…³è¯æ®é—¨æ§›ï¼ˆå“åº”å¤´/ä½“å‡ºç° Spring ç»‘å®š/é”™è¯¯ç‰¹å¾æ‰ç»§ç»­ï¼‰', 'é€šè¿‡ `invalid` / `verify` å·®å¼‚æ ¡éªŒï¼Œé™ä½å¯¹æ— å…³ URL çš„è¯¯æŠ¥'],
      },
      {
        title: 'æµ‹è¯•ç¨³å®šæ€§',
        items: ['ThinkPHP å¼•æ“æœªåˆå§‹åŒ–æ—¶ä¸æ‰§è¡Œæ‰«æï¼Œé¿å…æµ‹è¯•ç”¨ä¾‹è§¦å‘ç½‘ç»œè¯·æ±‚å¯¼è‡´è¶…æ—¶', '`go test ./...` å…¨é‡é€šè¿‡'],
      },
    ],
    links: [
      { label: 'Releases', href: `${repos.floweye}/releases`, external: true },
      { label: 'GitHub', href: repos.floweye, external: true },
    ],
  },
  {
    date: '2026-01-16',
    product: 'floweye',
    version: 'v1.6.0',
    title: 'SQLi/ç›®å½•æ‰«æå¢å¼º & Burp æ’ä»¶ä½“éªŒå‡çº§',
    highlights: ['å¸ƒå°”ç›²æ³¨å·®å¼‚æ£€æµ‹', 'DNSLog OOB å¸¦å¤–æ£€æµ‹', 'JSON å‚æ•°æ¨¡ç³Šæµ‹è¯•', 'ç›®å½•æ‰«æå±‚çº§éå† + æ™ºèƒ½è·¯å¾„æ„å»º', 'æ’ä»¶ä¸­æ–‡æ±‰åŒ– + QPS/è¿æ¥çŠ¶æ€/æ—¥å¿—æš—è‰²ä¸»é¢˜'],
    sections: [
      { title: 'SQL æ³¨å…¥æ£€æµ‹å¢å¼º', items: ['å¸ƒå°”ç›²æ³¨å·®å¼‚æ£€æµ‹ï¼ˆå“åº”å¯¹æ¯”ï¼‰', 'DNSLog OOB å¸¦å¤–æ£€æµ‹ï¼ˆCeye/Dnslog.cn ç­‰ï¼‰', 'JSON å‚æ•°æ¨¡ç³Šæµ‹è¯•ï¼ˆè‡ªåŠ¨è§£æ JSON è¯·æ±‚ä½“ï¼‰'] },
      { title: 'ç›®å½•æ‰«æå¢å¼º', items: ['å±‚çº§éå†ï¼š`hierarchical_scan` / `max_path_depth`', 'æ™ºèƒ½è·¯å¾„æ„å»ºï¼šæŒ‰ URL è·¯å¾„é€å±‚æ‰«æ'] },
      { title: 'Burp æ’ä»¶ä¼˜åŒ–', items: ['å…¨é‡ä¸­æ–‡æ±‰åŒ–', 'QPS å®æ—¶ç»Ÿè®¡', 'è¿æ¥çŠ¶æ€åŠ¨ç”»', 'æ—¥å¿—æ·±è‰²ä¸»é¢˜', 'ä½œè€…ä¿¡æ¯å±•ç¤ºï¼šæ˜ é›ªå®‰å…¨ | yyyxxx.cc'] },
      { title: 'æµ‹è¯•è¦†ç›–', items: ['æ–°å¢ 68 ä¸ªå•å…ƒæµ‹è¯•ç”¨ä¾‹', 'è¦†ç›–ä¸»è¦æ‰«æå¼•æ“å…³é”®è·¯å¾„'] },
    ],
    links: [
      { label: 'Releases', href: `${repos.floweye}/releases`, external: true },
      { label: 'GitHub', href: repos.floweye, external: true },
    ],
  },
  {
    date: '2026-01-14',
    product: 'floweye',
    version: 'v1.5.0',
    title: 'æ–°å¢ 4 ä¸ªæ¼æ´æ£€æµ‹å¼•æ“ï¼ˆå¼•æ“æ€»æ•°ï¼š17ï¼‰',
    highlights: ['Solr / Tomcat / Jira / Laravel å¼•æ“', 'è¦†ç›–å¤šä¸ªå…¸å‹æ¼æ´ä¸å¸¸è§è¯¯é…ç½®'],
    sections: [
      { title: 'æ–°å¢å¼•æ“', items: ['Solrï¼šVelocity RCE / SSRF / æœªæˆæƒ', 'Tomcatï¼šAJP Ghostcat / Manager å¼±å£ä»¤ / PUT ä¸Šä¼ ', 'Jiraï¼šæ¨¡æ¿æ³¨å…¥ / SSRF / ç”¨æˆ·æšä¸¾', 'Laravelï¼šIgnition RCE / .env æ³„éœ² / Telescope æš´éœ²'] },
    ],
    links: [{ label: 'Releases', href: `${repos.floweye}/releases`, external: true }],
  },
  {
    date: '2026-01-13',
    product: 'floweye',
    version: 'v1.4.0',
    title: 'æ–°å¢ Weblogic/Spring/Jenkins/ThinkPHP å¼•æ“ä¸æŒ‡çº¹è§„åˆ™',
    highlights: ['æ–°å¢ 4 ä¸ªé‡ç‚¹æ¡†æ¶å¼•æ“', 'è¡¥é½ Console/Actuator/CLI ç­‰æŒ‡çº¹è¯†åˆ«'],
    sections: [
      { title: 'æ–°å¢å¼•æ“', items: ['Weblogicï¼šT3/IIOP ååºåˆ—åŒ–ä¸ Console æš´éœ²', 'Springï¼šSpring4Shell / SpEL / Actuator é£é™©é¢', 'Jenkinsï¼šä»»æ„æ–‡ä»¶è¯»å– / Script Console / æœªæˆæƒ', 'ThinkPHPï¼š5.x å¤šç‰ˆæœ¬ RCE ä¸å‘¨è¾¹é£é™©'] },
      { title: 'æ–°å¢æŒ‡çº¹è§„åˆ™', items: ['Weblogicï¼ˆConsole/WSAT/T3ï¼‰', 'Jenkinsï¼ˆScript/CLI/APIï¼‰', 'SpringBootï¼ˆActuator/Whitelabelï¼‰'] },
    ],
  },
  {
    date: '2026-01-12',
    product: 'floweye',
    version: 'v1.3.0',
    title: 'Fastjson ååºåˆ—åŒ–æ¼æ´æ£€æµ‹å¼•æ“',
    highlights: ['è¦†ç›– 1.2.24â€“1.2.83', 'å¤šå˜ä½“ Payload é€‚é…ä¸åŒç»•è¿‡æ€è·¯', 'è‡ªåŠ¨è¯†åˆ« JSON è¯·æ±‚è§¦å‘æ£€æµ‹'],
  },
  {
    date: '2026-01-11',
    product: 'floweye',
    version: 'v1.2.0',
    title: 'æŒ‡çº¹è¯†åˆ«å¼•æ“ä¸Šçº¿ï¼ˆ1000+ è§„åˆ™ï¼‰',
    highlights: ['YAML è§„åˆ™æ ¼å¼', 'Favicon Hashï¼ˆMMH3ï¼‰', 'æ™ºèƒ½è°ƒåº¦ï¼šæŒ‰æŒ‡çº¹é€‰æ‹©å¼•æ“', 'æ–°å¢æŒ‡çº¹å±•ç¤ºé¡µé¢'],
  },
  {
    date: '2026-01-10',
    product: 'floweye',
    version: 'v0.1.0',
    title: 'é¦–å‘ç‰ˆæœ¬ï¼šåµŒå…¥å¼è¢«åŠ¨æ‰«æå¹³å°',
    highlights: ['é›¶é…ç½®å¯åŠ¨', 'UI/å­—å…¸/è§„åˆ™å…¨éƒ¨å†…ç½®', 'å¤šå¼•æ“æ£€æµ‹ + WebSocket å®æ—¶æ¨é€', 'æ¼æ´å»é‡ + Webhook å‘Šè­¦'],
  },

  // JackProxyï¼ˆ2025-04 è‡³ä»Šï¼‰
  {
    date: '2025-12-18',
    product: 'jackproxy',
    version: 'v2.0',
    title: 'ç¨³å®šç‰ˆå‘å¸ƒï¼šä»£ç†æ± å¯è§†åŒ–ä¸è½®æ¢ç­–ç•¥å‡çº§',
    highlights: ['è½®æ¢ç­–ç•¥å‡çº§ï¼šæŒ‰æ—¶é—´/è¯·æ±‚æ¬¡æ•°/å¤±è´¥ç‡', 'å®æ—¶å¥åº·æ£€æŸ¥ä¸è‡ªåŠ¨å‰”é™¤', 'æ›´ç°ä»£çš„ UI ä¸æ·±è‰²æ¨¡å¼ä½“éªŒ', 'å¸¸ç”¨å·¥å…·æ›´å‹å¥½çš„ä»£ç†è¾“å‡º'],
    sections: [
      { title: 'æ ¸å¿ƒå‡çº§', items: ['ä»£ç†è½®æ¢ç­–ç•¥ä¸å®¹é”™å¢å¼º', 'å®æ—¶çŠ¶æ€ç›‘æ§ä¸å¤±æ•ˆå‰”é™¤', 'æ›´å¿«çš„åˆ—è¡¨æ£€ç´¢ä¸ç­›é€‰'] },
    ],
    links: [{ label: 'äº§å“é¡µ', href: '/products/jackproxy' }],
  },
  {
    date: '2025-10-29',
    product: 'jackproxy',
    version: 'v1.9',
    title: 'ç›‘æ§å‘Šè­¦ä¸ç¨³å®šæ€§å¢å¼º',
    highlights: ['ç›‘æ§ç»´åº¦æ‰©å±•ï¼šå¯ç”¨ç‡/å»¶è¿Ÿ/å¤±è´¥ç‡', 'æ‰¹é‡å¯¼å…¥ä¸ä»£ç†åˆ†ç»„', 'å…³é”®è·¯å¾„æ€§èƒ½ä¼˜åŒ–'],
  },
  {
    date: '2025-08-16',
    product: 'jackproxy',
    version: 'v1.8',
    title: 'ä¸€é”®å¯åŠ¨ä½“éªŒä¸å¤šåè®®å…¼å®¹æå‡',
    highlights: ['å¯åŠ¨æµç¨‹ç®€åŒ–', 'HTTP/HTTPS/SOCKS5 å…¼å®¹æ€§æå‡', 'æ›´æ˜“ç”¨çš„å‚æ•°ä¸é»˜è®¤é…ç½®'],
  },
  {
    date: '2025-06-22',
    product: 'jackproxy',
    version: 'v1.7',
    title: 'ä»£ç†è´¨é‡æ§åˆ¶ä¸å»é‡ç­–ç•¥ä¼˜åŒ–',
    highlights: ['æ™ºèƒ½å»é‡ä¸é»‘åå•', 'æ›´ç¨³çš„å¹¶å‘è°ƒåº¦', 'è®°å½•å¯¼å‡ºä¸åŸºç¡€å®¡è®¡èƒ½åŠ›'],
  },
  {
    date: '2025-04-12',
    product: 'jackproxy',
    version: 'v1.5',
    title: 'æ—©æœŸç‰ˆæœ¬ï¼šåŸºç¡€ä»£ç†æ± èƒ½åŠ›æˆå‹',
    highlights: ['åŸºç¡€ä»£ç†æ± ç®¡ç†', 'è½®æ¢ä¸åŸºç¡€å¥åº·æ£€æµ‹', 'é¢å‘å®‰å…¨æµ‹è¯•åœºæ™¯çš„å¯ç”¨æ€§ä¼˜åŒ–'],
  },

  // Yingxue AiSQLï¼ˆ2025-08 è‡³ä»Šï¼‰
  {
    date: '2025-12-06',
    product: 'aisql',
    version: 'v1.0',
    title: 'ç¨³å®šç‰ˆï¼šAI é©±åŠ¨çš„ SQL æ³¨å…¥è‡ªåŠ¨åŒ–æ£€æµ‹',
    highlights: ['å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼šè¯†åˆ«/éªŒè¯/åˆ©ç”¨', 'ç°ä»£åŒ– Web ç•Œé¢ä¸æŠ¥å‘Šè¾“å‡º', 'å¸¸è§æ³¨å…¥ç±»å‹è¦†ç›–ä¸è¯¯æŠ¥æ§åˆ¶'],
    links: [{ label: 'äº§å“é¡µ', href: '/products/aisql' }],
  },
  {
    date: '2025-10-08',
    product: 'aisql',
    version: 'v0.9',
    title: 'Betaï¼šæç¤ºå·¥ç¨‹ä¸è‡ªåŠ¨åŒ–é“¾è·¯å®Œå–„',
    highlights: ['AI æç¤ºæ¨¡æ¿è¿­ä»£', 'è‡ªåŠ¨åŒ–é“¾è·¯æ›´ç¨³å®š', 'æ›´æ¸…æ™°çš„ç»“æœèšåˆä¸å¤æµ‹'],
  },
  {
    date: '2025-08-19',
    product: 'aisql',
    version: 'v0.6',
    title: 'Alphaï¼šæ ¸å¿ƒæ£€æµ‹é“¾è·¯æ‰“é€š',
    highlights: ['åŸºç¡€æ³¨å…¥è¯†åˆ«ä¸éªŒè¯', 'ä»»åŠ¡é˜Ÿåˆ—ä¸ç»“æœé¢æ¿é›å½¢', 'å·¥ç¨‹åŒ–è½åœ°ä¸å¯ç”¨æ€§æ‰“ç£¨'],
  },

  // SnowLightï¼ˆ2025-10 è‡³ä»Šï¼‰
  {
    date: '2025-12-29',
    product: 'snowlight',
    version: 'Milestone 03',
    title: 'å¼€å‘é¢„è§ˆï¼šæ§åˆ¶é¢æ¿ä¸é€šä¿¡æ¨¡å—è¿­ä»£',
    highlights: ['æ ¸å¿ƒé€šä¿¡æ¨¡å—ç¨³å®šæ€§æå‡', 'åŸºç¡€æ§åˆ¶é¢æ¿é›å½¢', 'å¯¹æŠ—æ–¹å‘çš„å·¥ç¨‹åŒ–ä¼˜åŒ–ï¼ˆåˆè§„å‰æï¼‰'],
    links: [{ label: 'äº§å“é¡µ', href: '/products/snowlight' }],
  },
  {
    date: '2025-11-06',
    product: 'snowlight',
    version: 'Milestone 02',
    title: 'æ ¸å¿ƒæ¨¡å—å®Œå–„ä¸æ„å»ºä½“ç³»ä¼˜åŒ–',
    highlights: ['æ¨¡å—åŒ–é‡æ„', 'æ„å»º/æ‰“åŒ…æµç¨‹ä¼˜åŒ–', 'å¼€å‘é¢„è§ˆä¸å†…éƒ¨æµ‹è¯•æ¨è¿›'],
  },
  {
    date: '2025-10-02',
    product: 'snowlight',
    version: 'Milestone 01',
    title: 'é¡¹ç›®ç«‹é¡¹ï¼šRust åŸç”Ÿæ¡†æ¶æ–¹å‘ç¡®å®š',
    highlights: ['Rust åŸç”Ÿå¼€å‘è·¯çº¿', 'åŸºç¡€åè®®ä¸æ¶æ„è®¾è®¡', 'æŒç»­å¼€å‘ä¸­ï¼ˆæµ‹è¯•ç‰ˆç­¹å¤‡ï¼‰'],
  },
 ] satisfies UpdateEntry[];

const updates = [...updatesRaw].sort((a, b) => (a.date < b.date ? 1 : -1));

const updateCounts = products.reduce<Record<ProductId, number>>((acc, p) => {
  acc[p.id] = updates.filter((u) => u.product === p.id).length;
  return acc;
}, {} as Record<ProductId, number>);
---

<Layout title="æ›´æ–°æ—¥å¿— - æ˜ é›ªå®‰å…¨" description="æ˜ é›ªå®‰å…¨äº§å“æ›´æ–°æ—¥å¿—ä¸å¼€å‘è¿›åº¦ï¼ˆ2025-04 è‡³ä»Šï¼‰">
  <!-- ç²¾è‡´ç½‘æ ¼èƒŒæ™¯ -->
  <div class="fixed inset-0 -z-10 grid-bg opacity-40 dark:opacity-30"></div>

  <!-- é«˜ç«¯æ¸å˜èƒŒæ™¯ - æ·±è‰²æ¨¡å¼ -->
  <div class="fixed inset-0 -z-10 overflow-hidden hidden dark:block">
    <div class="absolute -top-40 -left-40 w-[600px] h-[600px] bg-blue-600/20 rounded-full blur-[120px]"></div>
    <div class="absolute top-1/3 right-0 w-[500px] h-[500px] bg-indigo-600/15 rounded-full blur-[100px]"></div>
    <div class="absolute bottom-0 left-1/3 w-[400px] h-[400px] bg-purple-600/10 rounded-full blur-[100px]"></div>
  </div>

  <!-- é«˜ç«¯æ¸å˜èƒŒæ™¯ - æµ…è‰²æ¨¡å¼ -->
  <div class="fixed inset-0 -z-10 overflow-hidden dark:hidden">
    <div class="absolute -top-40 -left-40 w-[600px] h-[600px] bg-blue-400/15 rounded-full blur-[120px]"></div>
    <div class="absolute top-1/3 right-0 w-[500px] h-[500px] bg-indigo-400/10 rounded-full blur-[100px]"></div>
    <div class="absolute bottom-0 left-1/3 w-[400px] h-[400px] bg-purple-400/8 rounded-full blur-[100px]"></div>
  </div>

  <!-- å¯¼èˆªæ  -->
  <header class="sticky top-0 z-50 w-full border-b border-border/40 bg-background/98 dark:bg-background/95 backdrop-blur-xl">
    <div class="container mx-auto flex h-16 max-w-screen-2xl items-center justify-between px-8 lg:px-12">
      <a class="flex items-center space-x-3 group" href="/">
        <img src="/logo.png" alt="æ˜ é›ªå®‰å…¨" class="h-8 w-8" />
        <span class="font-semibold text-lg tracking-tight">æ˜ é›ªå®‰å…¨</span>
      </a>
      <nav class="flex items-center space-x-8 text-sm">
        <a class="text-muted-foreground hover:text-foreground transition-colors" href="/">é¦–é¡µ</a>
        <a class="text-muted-foreground hover:text-foreground transition-colors" href="/products">äº§å“</a>
        <a class="text-foreground font-medium" href="/updates">æ›´æ–°</a>
        <a class="text-muted-foreground hover:text-foreground transition-colors" href="/#contact">è”ç³»</a>
        <div class="w-px h-5 bg-border/50"></div>
        <ThemeToggle />
      </nav>
    </div>
  </header>

  <!-- é¡µé¢æ ‡é¢˜ -->
  <section class="container mx-auto relative px-6 py-20">
    <div class="mx-auto flex max-w-[980px] flex-col items-center gap-6 text-center">
      <div class="fade-in-up inline-flex items-center rounded-full bg-gradient-to-r from-green-500/20 to-blue-500/20 px-4 py-2 text-sm font-medium border border-green-500/20 backdrop-blur-sm">
        <span class="mr-2 text-lg">ğŸ§©</span>
        <span class="text-green-400">äº§å“æ›´æ–°</span>
      </div>

      <h1 class="fade-in-up delay-100 text-4xl font-bold leading-tight tracking-tighter md:text-5xl lg:text-6xl">
        æ›´æ–°<span class="gradient-text-animated">æ—¥å¿—</span>
      </h1>

      <p class="fade-in-up delay-200 max-w-[820px] text-lg text-muted-foreground leading-relaxed">
        ä» <strong class="text-foreground">2025-04</strong> èµ·çš„ç‰ˆæœ¬èŠ‚å¥æ•´ç†ï¼šè¦†ç›– JackProxy / Yingxue AiSQL / SnowLight / FlowEyeã€‚
      </p>

      <div class="fade-in-up delay-300 grid w-full max-w-4xl gap-4 sm:grid-cols-2 lg:grid-cols-4">
        {products.map((p) => (
          <a href={p.href} class="group rounded-2xl border border-border/50 bg-card/40 p-4 backdrop-blur-sm hover-card hover:border-primary/30">
            <div class="flex items-center justify-between">
              <div class="font-semibold">{p.name}</div>
              <span class={`inline-flex items-center rounded-full bg-${p.badgeColor}-500/10 px-2.5 py-1 text-xs font-medium text-${p.badgeColor}-400 ring-1 ring-inset ring-${p.badgeColor}-500/20`}>
                {updateCounts[p.id]} æ¡
              </span>
            </div>
            <div class="mt-2 text-sm text-muted-foreground">æŸ¥çœ‹äº§å“è¯¦æƒ… â†’</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- æ›´æ–°ç­›é€‰ -->
  <section class="container mx-auto px-6 pb-6">
    <div class="mx-auto max-w-3xl">
      <div class="flex flex-col gap-3 rounded-2xl border border-border/50 bg-card/40 p-5 backdrop-blur-sm">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div class="text-sm font-semibold">ç­›é€‰</div>
          <div class="text-xs text-muted-foreground">ç‚¹å‡»æ ‡ç­¾ç­›é€‰å¯¹åº”äº§å“</div>
        </div>
        <div class="flex flex-wrap gap-2" id="update-filters" role="tablist" aria-label="äº§å“ç­›é€‰">
          <button type="button" data-filter="all" class="filter-chip is-active" role="tab" aria-selected="true">å…¨éƒ¨</button>
          {products.map((p) => (
            <button type="button" data-filter={p.id} class="filter-chip" role="tab" aria-selected="false">
              {p.name}
            </button>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- æ—¶é—´çº¿ -->
  <section class="container mx-auto px-6 pb-24">
    <div class="mx-auto max-w-3xl">
      {updates.map((u, index) => {
        const product = products.find((p) => p.id === u.product);
        const dotColor = u.product === 'floweye' ? 'primary' : u.product === 'jackproxy' ? 'purple' : u.product === 'aisql' ? 'orange' : 'cyan';
        const borderColor = index === 0 ? 'border-primary/30' : 'border-border/30';
        return (
          <div class={`update-item relative pl-10 pb-10 border-l-2 ${borderColor}`} data-product={u.product}>
            <div class="absolute left-0 top-0 -translate-x-1/2 flex h-5 w-5 items-center justify-center">
              <div class={`h-5 w-5 rounded-full border-2 border-${dotColor} bg-${dotColor}/10 ${index === 0 ? `shadow-lg shadow-${dotColor}/30` : ''}`}></div>
            </div>

            <div class="group rounded-2xl border border-border/50 bg-card/50 p-6 backdrop-blur-sm hover-card">
              <div class="flex flex-wrap items-center gap-3 mb-4">
                <time class="text-sm text-muted-foreground bg-muted/50 px-3 py-1 rounded-full">{u.date}</time>
                <span class="inline-flex items-center rounded-full bg-green-500/10 px-3 py-1 text-xs font-medium text-green-400 ring-1 ring-inset ring-green-500/20">
                  {u.version}
                </span>
                {product && (
                  <a href={product.href} class={`inline-flex items-center rounded-full bg-${product.badgeColor}-500/10 px-3 py-1 text-xs font-medium text-${product.badgeColor}-400 ring-1 ring-inset ring-${product.badgeColor}-500/20 hover:underline`}>
                    {product.name}
                  </a>
                )}
              </div>

              <h3 class="text-xl font-bold mb-4 group-hover:text-primary transition-colors">{u.title}</h3>

              <div class="space-y-4 text-muted-foreground">
                <div class="p-4 rounded-xl bg-card/50 border border-border/30">
                  <p class="font-semibold text-foreground/80 mb-2">æ›´æ–°è¦ç‚¹</p>
                  <ul class="space-y-1.5 ml-4 text-sm">
                    {u.highlights.map((item) => (
                      <li class="flex items-start gap-2">
                        <span class="text-blue-400">â€¢</span>
                        <span>{item}</span>
                      </li>
                    ))}
                  </ul>
                </div>

                {u.sections && u.sections.length > 0 && (
                  <details class="rounded-xl border border-border/30 bg-muted/20 p-4">
                    <summary class="cursor-pointer select-none text-sm font-semibold text-foreground/80">
                      å±•å¼€è¯¦ç»†å†…å®¹
                    </summary>
                    <div class="mt-4 space-y-3 text-sm text-muted-foreground">
                      {u.sections.map((s) => (
                        <div class="rounded-lg bg-card/40 border border-border/30 p-3">
                          <div class="font-semibold text-foreground/80 mb-2">{s.title}</div>
                          <ul class="space-y-1.5 ml-4">
                            {s.items.map((it) => (
                              <li class="flex items-start gap-2">
                                <span class="text-emerald-400">â€¢</span>
                                <span>{it}</span>
                              </li>
                            ))}
                          </ul>
                        </div>
                      ))}
                    </div>
                  </details>
                )}
              </div>

              {u.links && u.links.length > 0 && (
                <div class="flex flex-wrap gap-3 pt-4 mt-4 border-t border-border/30">
                  {u.links.map((l) => (
                    <a
                      href={l.href}
                      target={('external' in l && l.external) ? '_blank' : undefined}
                      class="text-sm text-primary hover:underline"
                    >
                      {l.label} â†’
                    </a>
                  ))}
                </div>
              )}
            </div>
          </div>
        );
      })}

      <div class="relative pl-10">
        <div class="absolute left-0 top-0 -translate-x-1/2 flex h-5 w-5 items-center justify-center">
          <div class="h-5 w-5 rounded-full border-2 border-border bg-muted"></div>
        </div>
        <p class="text-sm text-muted-foreground italic">æ›´å¤šæ›´æ–°æŒç»­è¿­ä»£ä¸­â€¦</p>
      </div>
    </div>
  </section>

  <!-- æœåŠ¡è¯´æ˜ï¼ˆä¸å†™ç‰ˆæœ¬æ—¥å¿—ï¼‰ -->
  <section class="container mx-auto px-6 pb-24">
    <div class="mx-auto max-w-3xl">
      <div class="rounded-2xl border border-border/50 bg-card/40 p-6 backdrop-blur-sm">
        <div class="flex items-center justify-between gap-4 flex-wrap">
          <div class="space-y-1">
            <div class="text-sm font-semibold text-primary tracking-wide uppercase">æœåŠ¡</div>
            <h2 class="text-2xl font-bold">ä¸“ä¸šå…æ€æœåŠ¡</h2>
          </div>
          <a href="/products/antivirus" class="text-sm text-primary hover:underline">æŸ¥çœ‹æœåŠ¡ä»‹ç» â†’</a>
        </div>
        <p class="mt-4 text-muted-foreground leading-relaxed">
          ç›®å‰ä»å¯å¯¹æŠ—å›½å†…å¤–ä¸»æµå®‰å…¨è½¯ä»¶ï¼Œå¹¶æä¾›è‡ªåŠ¨åŒ–ç»´æƒæµç¨‹æ”¯æŒï¼ˆéœ€åœ¨<strong class="text-foreground">åˆæ³•æˆæƒ</strong>å‰æä¸‹æ‰§è¡Œï¼‰ã€‚å¦‚éœ€æŠ¥ä»·/æ–¹æ¡ˆ/æµ‹è¯•ï¼Œè¯·ç›´æ¥è”ç³»ã€‚
        </p>
        <div class="mt-5 flex flex-wrap items-center gap-3">
          <a href="/#contact" class="inline-flex h-10 items-center justify-center rounded-lg bg-primary px-6 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90">
            è”ç³»æˆ‘ä»¬
          </a>
          <a href="/products/antivirus" class="inline-flex h-10 items-center justify-center rounded-lg border border-border bg-background px-6 text-sm font-medium transition-colors hover:bg-accent">
            æŸ¥çœ‹è¯¦æƒ…
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-border/40 bg-card/30 backdrop-blur-sm">
    <div class="container mx-auto px-6 py-8">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex flex-col items-center md:items-start gap-2">
          <div class="flex items-center gap-2">
            <img src="/logo.png" alt="æ˜ é›ªå®‰å…¨" class="h-6 w-6 opacity-70" />
            <span class="text-sm font-medium text-foreground/70">æ˜ é›ªå®‰å…¨</span>
          </div>
          <p class="text-xs text-muted-foreground">Â© 2025 YingxueSec. All rights reserved.</p>
        </div>

        <div class="flex flex-wrap items-center justify-center gap-4 text-xs">
          <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted/50 border border-border/30">
            <svg class="h-3.5 w-3.5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="text-muted-foreground">è¿è¡Œ <span id="runtime_days" class="text-foreground/80 font-medium">0</span> å¤©</span>
          </div>
        </div>
      </div>
    </div>
  </footer>
</Layout>

<style>
  .filter-chip {
    border: 1px solid hsl(var(--border));
    background: hsl(var(--background));
    color: hsl(var(--muted-foreground));
    padding: 0.5rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    line-height: 1;
    transition: all 150ms ease;
  }
  .filter-chip:hover {
    background: hsl(var(--accent));
    color: hsl(var(--foreground));
  }
  .filter-chip.is-active {
    background: hsl(var(--primary));
    border-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }
  .update-item.is-hidden {
    display: none;
  }
</style>

<script is:inline>
  (function () {
    const filters = document.getElementById('update-filters');
    if (!filters) return;

    const items = Array.from(document.querySelectorAll('.update-item'));
    const buttons = Array.from(filters.querySelectorAll('button[data-filter]'));

    function setActive(filter) {
      buttons.forEach((btn) => {
        const isActive = btn.getAttribute('data-filter') === filter;
        btn.classList.toggle('is-active', isActive);
        btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
      });

      items.forEach((el) => {
        const product = el.getAttribute('data-product');
        const shouldShow = filter === 'all' || product === filter;
        el.classList.toggle('is-hidden', !shouldShow);
      });
    }

    filters.addEventListener('click', function (e) {
      const target = e.target;
      if (!(target instanceof HTMLElement)) return;
      const btn = target.closest('button[data-filter]');
      if (!btn) return;
      setActive(btn.getAttribute('data-filter'));
    });

    setActive('all');
  })();
</script>

<script is:inline>
  // è®¡ç®—è¿è¡Œæ—¶é—´ï¼ˆä» 2025-11-20 å¼€å§‹ï¼‰ï¼ŒæŒ‰åŒ—äº¬æ—¶é—´ï¼ˆUTC+8ï¼‰è®¡ç®—â€œå¤©æ•°â€
  function updateRuntime() {
    const BJ_OFFSET_MS = 8 * 60 * 60 * 1000;
    const MS_PER_DAY = 24 * 60 * 60 * 1000;
    const START_DAY_INDEX = Math.floor(Date.UTC(2025, 10, 20) / MS_PER_DAY);
    const nowDayIndex = Math.floor((Date.now() + BJ_OFFSET_MS) / MS_PER_DAY);
    const days = Math.max(0, nowDayIndex - START_DAY_INDEX);
    const runtimeElement = document.getElementById('runtime_days');
    if (runtimeElement) runtimeElement.textContent = String(days);
  }
  updateRuntime();
  (function scheduleRuntimeUpdateAtBJMidnight() {
    const BJ_OFFSET_MS = 8 * 60 * 60 * 1000;
    const MS_PER_DAY = 24 * 60 * 60 * 1000;
    const nowShifted = Date.now() + BJ_OFFSET_MS;
    const msUntilNextBJMidnight = MS_PER_DAY - (nowShifted % MS_PER_DAY);
    setTimeout(() => {
      updateRuntime();
      setInterval(updateRuntime, MS_PER_DAY);
    }, msUntilNextBJMidnight);
  })();
</script>
