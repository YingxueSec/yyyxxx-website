---
interface Feature {
  text: string;
  color: string;
}

interface Badge {
  text: string;
  color: string;
  pulse?: boolean;
}

interface Action {
  text: string;
  href: string;
  primary?: boolean;
  external?: boolean;
}

interface Props {
  title: string;
  description: string;
  detailUrl: string;
  badges: Badge[];
  features: Feature[];
  featureTitle?: string;
  actions?: Action[];
  gradient: { from: string; to: string };
  icon?: {
    type: 'image' | 'svg';
    src?: string;
    svg?: string;
  };
}

const { 
  title, 
  description, 
  detailUrl,
  badges, 
  features, 
  featureTitle = '核心特性',
  actions = [],
  gradient,
  icon
} = Astro.props;

const gradientClasses = `from-${gradient.from}-500 to-${gradient.to}-500`;
const bgGradientClasses = `from-${gradient.from}-500/5 to-${gradient.to}-500/5`;
const blurClass = `bg-${gradient.from}-500/5`;
---

<div class="group relative overflow-hidden rounded-2xl border border-border/50 bg-card/50 backdrop-blur-xl transition-all hover-card">
  <div class={`absolute inset-0 bg-gradient-to-br ${bgGradientClasses} via-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700`}></div>
  <div class={`absolute top-0 right-0 w-64 h-64 ${blurClass} rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2`}></div>
  
  <div class="relative grid gap-8 p-8 md:p-10 md:grid-cols-[180px_1fr]">
    <div class="flex items-center justify-center">
      {icon?.type === 'image' ? (
        <img src={icon.src} alt={title} class="h-40 w-40 rounded-2xl shadow-xl transition-transform group-hover:scale-105" />
      ) : (
        <div class={`h-40 w-40 rounded-2xl bg-gradient-to-br ${gradientClasses} shadow-xl flex items-center justify-center transition-transform group-hover:scale-105`}>
          <Fragment set:html={icon?.svg} />
        </div>
      )}
    </div>
    
    <div class="space-y-5">
      <div>
        <h3 class="text-2xl font-bold group-hover:text-primary transition-colors">{title}</h3>
        <div class="mt-3 flex items-center gap-2">
          {badges.map(badge => (
            <span class:list={[
              "inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ring-1 ring-inset",
              `bg-${badge.color}-500/10 text-${badge.color}-400 ring-${badge.color}-500/20`,
              badge.pulse && "animate-pulse"
            ]}>
              {badge.text}
            </span>
          ))}
        </div>
      </div>
      
      <p class="text-muted-foreground leading-relaxed">{description}</p>
      
      <div class="space-y-3">
        <h4 class="font-semibold text-foreground/90">{featureTitle}</h4>
        <ul class="grid gap-2 text-sm sm:grid-cols-2">
          {features.map(feature => (
            <li class="flex items-center gap-3 p-2.5 rounded-lg bg-card/50 border border-border/30">
              <div class={`flex h-6 w-6 items-center justify-center rounded bg-${feature.color}-500/10`}>
                <svg class={`h-3.5 w-3.5 text-${feature.color}-400`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <span class="text-muted-foreground">{feature.text}</span>
            </li>
          ))}
        </ul>
      </div>
      
      <div class="flex items-center gap-4 pt-4">
        <a href={detailUrl} class="inline-flex h-9 items-center justify-center rounded-lg bg-primary px-4 text-sm font-medium text-primary-foreground transition-all hover:bg-primary/90 hover:scale-105">
          查看详情
        </a>
        {actions.map(action => (
          <a 
            href={action.href} 
            target={action.external ? "_blank" : undefined}
            class="inline-flex h-9 items-center justify-center rounded-lg border border-border bg-background px-4 text-sm font-medium transition-colors hover:bg-accent"
          >
            {action.text}
          </a>
        ))}
      </div>
    </div>
  </div>
</div>
